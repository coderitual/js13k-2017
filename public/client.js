!function(){"use strict";var e={hole:"assets/hole.svg",stamp:"assets/stamp.svg",tree:"assets/tree.svg",eye:"assets/eye.svg",stamp2:"assets/stamp2.svg",eye_closed:"assets/eye_closed.svg",heart:"assets/heart.svg",projectile:"assets/projectile.svg",arrow:"assets/arrow.svg",powerup:"assets/powerup.svg"},t=document.createElement("img");t.src=e.hole,t.addEventListener("load",function(){var e=t.width,i=t.height;console.log({width:e,height:i})});var i=document.createElement("img");i.src=e.stamp,i.addEventListener("load",function(){var e=i.width,t=i.height;console.log({width:e,height:t})});var a=document.createElement("img");a.src=e.stamp2,a.addEventListener("load",function(){var e=a.width,t=a.height;console.log({width:e,height:t})});var o=document.createElement("img");o.src=e.tree,o.addEventListener("load",function(){var e=o.width,t=o.height;console.log({width:e,height:t})});var n=document.createElement("img");n.src=e.eye,n.addEventListener("load",function(){var e=n.width,t=n.height;console.log({width:e,height:t})});var r=document.createElement("img");r.src=e.eye_closed,r.addEventListener("load",function(){var e=r.width,t=r.height;console.log({width:e,height:t})});var s=document.createElement("img");s.src=e.powerup,s.addEventListener("load",function(){var e=s.width,t=s.height;console.log({width:e,height:t})});var h=[n,n,n,n,r],d=document.getElementById("canvas"),l=d.getContext("2d"),g={x:d.width/2,y:d.height/2},c={x:0,y:0,tx:0,ty:0},m=function(){d.width=d.clientWidth,d.height=d.clientHeight,g.x=d.width/2,g.y=d.height/2};window.addEventListener("resize",m),m();var w=void 0,v=0;(w="8080"===window.location.port?io(window.location.hostname+":3000",{upgrade:!1,transports:["websocket"]}):io({upgrade:!1,transports:["websocket"]})).on("pong",function(e){v=e});var p={pointer:g,player:c},u=function(e,r,g){l.globalAlpha=1,l.globalCompositeOperation="source-over",l.fillStyle="#2c5b1e",l.fillRect(0,0,d.width,d.height),l.save(),l.translate(-e.player.x,-e.player.y),l.drawImage(t,0,0,200,200),l.drawImage(t,300,200,100,100),l.drawImage(s,300,50),l.drawImage(o,20,200),l.drawImage(o,250,300),l.drawImage(o,90,400,246,314),l.globalCompositeOperation="soft-light",l.drawImage(i,-100,-200,500,500),l.drawImage(a,300,200,300,300),l.globalCompositeOperation="source-over",l.restore();var c=h[Math.round(g/500)%5];l.drawImage(c,d.width/2-n.width/2,d.height/2-n.height/2),l.beginPath(),l.arc(e.pointer.x,e.pointer.y,5,0,2*Math.PI,!1),l.fillStyle="rgba(255, 255, 255, 0.5)",l.fill(),l.lineWidth=3,l.strokeStyle="#fff",l.stroke(),l.fillStyle="rgba(255, 255, 255, 1)",l.font="12px sans-serif",l.textAlign="start",l.textBaseline="top",l.fillText("ping: "+v,10,10)},f=function(e,t){var i=e.player;i.x+=(i.tx-i.x)/5,i.y+=(i.ty-i.y)/5},y=0;window.addEventListener("deviceorientation",function(e){var t=e.beta,i=e.gamma;t>90&&(t=90),-90>t&&(t=-90),t+=90,i+=90,g.x=d.width*i/180,g.y=d.height*t/180,g.cw=d.width,g.ch=d.height,w.emit("c:pointer",g)}),w.on("s:player",function(e,t){c.tx=e,c.ty=t}),function e(t){requestAnimationFrame(e);f(p),u(p,0,t),y=t}(0)}();
