!function(){"use strict";var e={hole:"assets/hole.svg",stamp:"assets/stamp.svg",tree:"assets/tree.svg",eye:"assets/eye.svg",stamp2:"assets/stamp2.svg",eye_closed:"assets/eye_closed.svg",heart:"assets/heart.svg",projectile:"assets/projectile.svg",arrow:"assets/arrow.svg",powerup:"assets/powerup.svg"};console.log(e);var t=document.createElement("img");t.src=e.hole,t.addEventListener("load",function(){var e=t.width,a=t.height;console.log({width:e,height:a})});var a=document.createElement("img");a.src=e.stamp,a.addEventListener("load",function(){var e=a.width,t=a.height;console.log({width:e,height:t})});var i=document.createElement("img");i.src=e.stamp2,i.addEventListener("load",function(){var e=i.width,t=i.height;console.log({width:e,height:t})});var o=document.createElement("img");o.src=e.tree,o.addEventListener("load",function(){var e=o.width,t=o.height;console.log({width:e,height:t})});var r=document.createElement("img");r.src=e.eye,r.addEventListener("load",function(){var e=r.width,t=r.height;console.log({width:e,height:t})});var n=document.createElement("img");n.src=e.eye_closed,n.addEventListener("load",function(){var e=n.width,t=n.height;console.log({width:e,height:t})});var s=document.createElement("img");s.src=e.powerup,s.addEventListener("load",function(){var e=s.width,t=s.height;console.log({width:e,height:t})});var h=[r,r,r,r,n],d=document.getElementById("canvas"),l=d.getContext("2d"),g={x:d.width/2,y:d.height/2},c={x:0,y:0,vx:0,vy:0,ax:0,ay:0,tx:0,ty:0},v=function(){d.width=d.clientWidth,d.height=d.clientHeight,g.x=d.width/2,g.y=d.height/2};window.addEventListener("resize",v),v();var m=void 0;m="8080"===window.location.port?io(window.location.hostname+":3000",{upgrade:!1,transports:["websocket"]}):io({upgrade:!1,transports:["websocket"]});var w={pointer:g,player:c},p=function(e,n,g){l.globalAlpha=1,l.globalCompositeOperation="source-over",l.fillStyle="#2c5b1e",l.fillRect(0,0,d.width,d.height),l.save(),l.translate(-e.player.x,-e.player.y),l.drawImage(t,0,0,200,200),l.drawImage(t,300,200,100,100),l.drawImage(s,300,50),l.drawImage(o,20,200),l.drawImage(o,250,300),l.drawImage(o,90,400,246,314),l.globalCompositeOperation="soft-light",l.drawImage(a,-100,-200,500,500),l.drawImage(i,300,200,300,300),l.globalCompositeOperation="source-over",l.restore();var c=h[Math.round(g/500)%5];l.drawImage(c,d.width/2-r.width/2,d.height/2-r.height/2),l.beginPath(),l.arc(e.pointer.x,e.pointer.y,5,0,2*Math.PI,!1),l.fillStyle="rgba(255, 255, 255, 0.5)",l.fill(),l.lineWidth=3,l.strokeStyle="#fff",l.stroke()},u=function(e,t){var a=e.player;a.x+=(a.tx-a.x)/5,a.y+=(a.ty-a.y)/5},y=0;window.addEventListener("deviceorientation",function(e){var t=e.beta,a=e.gamma;t>90&&(t=90),-90>t&&(t=-90),t+=90,a+=90,g.x=d.width*a/180,g.y=d.height*t/180,g.cw=d.width,g.ch=d.height,m.emit("u:pointer",g)}),m.on("s:player",function(e,t){c.tx=e,c.ty=t}),function e(t){requestAnimationFrame(e);u(w),p(w,0,t),y=t}(0)}();
